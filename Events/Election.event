#include EAstdlib.event

EventPointerTable(0x17,ThisChapter)

Definitions:
#define BarharaCounter 0
#define ChalphyCounter 1
#define JungbyCounter 2
#define EddaCounter 3
#define DozelCounter 4
#define FreegeCounter 5
#define VelthomerCounter 6
#define SpareCounter 7

#define BarharaVisited 0x7
#define ChalphyVisited 0x8
#define JungbyVisited 0x9
#define EddaVisited 0xA
#define DozelVisited 0xB
#define FreegeVisited 0xC
#define VelthomerVisited 0xD

#define FaithClaude 0xE
#define FaithLex 0xF
#define TaxAideen 0x10
#define TaxAlvis 0x11
#define FATiltyu 0x12
#define FAClaude 0x13
#define EduAless 0x14
#define EduLeaf 0x15
#define EnviroJohan 0x16
#define EnviroTiltyu 0x17
#define DefenceLana 0x18
#define DefenceAlvis 0x19

#define GuardianPrinted 0x1A
#define TelegraphPrinted 0x1B
#define MirrorPrinted 0x1C
#define ExaminerPrinted 0x1D
#define IndependentPrinted 0x1E
#define TimesPrinted 0x1F
#define ExpressPrinted 0x20
#define NOTWPrinted 0x21

#define BylethInvestigated 0x22


ThisChapter:
POIN TurnBasedEvents
POIN CharacterBasedEvents
POIN LocationBasedEvents
POIN MiscBasedEvents
POIN Dunno Dunno Dunno
POIN Tutorial
POIN TrapData TrapData
POIN Units Units
POIN $0 $0 $0 $0 $0 $0
POIN BeginningScene EndingScene

Units:
UNIT Sigurd LordKnight 0x00 Level(30, Ally, 0) [14,22] 0x0 0x00 0x0 0x00 [Tyrfing] NoAI 
UNIT Celice LordKnight 0x00 Level(30, Ally, 0) [21,7] 0x0 0x00 0x0 0x00 [SilverSword] NoAI 
UNIT


TurnBasedEvents:
TurnEventEnemy(0x0,FodlanSpies,1)
TurnEventPlayer(0x0,Journalism,3)
TurnEventPlayer(0x0,AttackAds,4)
TurnEventPlayer(0x0,EnemyAds,5)
TurnEventPlayer(0x0,ClearVisits,6)
TurnEventPlayer(0x0,PartyInfighting,6)
TurnEventPlayer(0x0,AttackAds,7)
TurnEventPlayer(0x0,Journalism,8)
TurnEventEnemy(0x0,PropagandaPlotting,9)
TurnEventEnemy(0x0,PropagandaPlotting2,10)
TurnEventPlayer(0x0,PartyInfighting,11)
TurnEventPlayer(0x0,PartyInfighting,12)
TurnEventPlayer(0x0,Journalism,13)
TurnEventPlayer(0x0,AttackAds,14)
TurnEventEnemy(0x0,BylethFishingTrip,15)
TurnEventPlayer(0x0,EnemyAds,16)
TurnEventPlayer(0x0,Journalism,17)
TurnEventPlayer(0x0,AttackAds,18)
TurnEventPlayer(0x0,OneWeekWarning,19)
TurnEventPlayer(0x0,PartyInfighting,20)
//i'd put in alvis's coup here, but i won't make that i don't think
TurnEventPlayer(0x0,AttackAds,22)
TurnEventPlayer(0x0,Journalism,23)
TurnEventPlayer(0x0,IncestFaked,24)
TurnEventPlayer(0x0,GreatDebate,25)
TurnEventPlayer(0x0,CeliceNews,26) //expand for big drama
TurnEventPlayer(0x0,AttackAds,27)
//last day of campaign
//discuss things
//election tomorrow
//election!
END_MAIN

CharacterBasedEvents:
END_MAIN

LocationBasedEvents:
Village(BarharaVisited,BarharaEntered,21,7)
Village(ChalphyVisited,ChalphyEntered,14,22)
Village(JungbyVisited,JungbyEntered,4,27)
Village(EddaVisited,EddaEntered,27,18)
Village(DozelVisited,DozelEntered,18,13)
Village(FreegeVisited,FreegeEntered,3,8)
Village(VelthomerVisited,VelthomerEntered,27,3)
END_MAIN

MiscBasedEvents:
CauseGameOverIfLordDies
DefeatBoss(EndingScene)
END_MAIN

Dunno:
//DO NOT TOUCH
WORD $00

Tutorial:
//DO NOT TOUCH
WORD $00

TrapData:
END_MAIN

ALIGN 4

BeginningScene:
CAM1 [21,7]
MUSC M_FE4Convo1
SetBackground(Castle_Room) //check the real defs later
TEXTSHOW MAFC5OpeningUsedVersion
TEXTEND
REMA
CALL $9EE2C4 //EndConvo. The tutorial *lied*

LOAD1 0x1 OpeningCutsceneUnits
EVBIT_T 9 //CMON; camera follows
MOVE 5 Sigurd [27,3]
STAL 15
MOVE 5 Celice [27,3]
ENUN
SetBackground(Castle_Hall) //check the real defs later
TEXTSHOW MAFC5OpeningVelthomer
TEXTEND
CALL $9EE2C4 //EndConvo

EVBIT_T 9 //CMON; camera follows
MOVE 5 Sigurd [3,8]
STAL 15
MOVE 5 Celice [3,8]
ENUN
SetBackground(Castle_Hall) //check the real defs later
TEXTSHOW MAFC5OpeningFreege
TEXTEND
CALL $9EE2C4 //EndConvo

EVBIT_T 9 //CMON; camera follows
MOVE 5 Sigurd [18,13]
STAL 15
MOVE 5 Celice [18,13]
ENUN
SetBackground(Castle_Hall) //check the real defs later
TEXTSHOW MAFC5OpeningDozel
TEXTEND
CALL $9EE2C4 //EndConvo

EVBIT_T 9 //CMON; camera follows
MOVE 5 Sigurd [27,18]
STAL 15
MOVE 5 Celice [27,18]
ENUN
SetBackground(Castle_Hall) //check the real defs later
TEXTSHOW MAFC5OpeningEdda
TEXTEND
CALL $9EE2C4 //EndConvo

EVBIT_T 9 //CMON; camera follows
MOVE 5 Sigurd [14,22]
STAL 15
MOVE 5 Celice [14,22]
ENUN
SetBackground(Castle_Hall) //check the real defs later
TEXTSHOW MAFC5OpeningChalphy
TEXTEND
CALL $9EE2C4 //EndConvo

EVBIT_T 9 //CMON; camera follows
MOVE 5 Sigurd [4,27]
STAL 15
MOVE 5 Celice [4,27]
ENUN
SetBackground(Castle_Hall) //check the real defs later
TEXTSHOW MAFC5OpeningJungby
TEXTEND
CALL $9EE2C4 //EndConvo

STAL 10
SVAL 0x2 Sigurd
CALL WarpOutEffect
STAL 0x08
DISA Sigurd
SVAL 0x2 Celice
CALL WarpOutEffect
STAL 0x08
DISA Celice
STAL 10
CAM1 [21,7]
WARPIN [21,7]
LOAD1 0x1 Units
ENDWARP
STAL 10
SetBackground(Castle_Room)
TEXTSHOW MAFC5OpeningPreTutorial
TEXTEND
CALL InitialSetup
CALL TutorialMessage
ENDA

EndingScene:
ENDA



// Events

InitialSetup:
//So the plan is roughly to mess with counters to represent polls.
//Counter at 15 means pretty much 100% of the vote.
//Counter at 0 means pretty much 0% of the vote.
//Things in between mean things in between.
//I'll figure out the balance in time.
//But probably around 10 or so to hit quota for all candidates?
COUNTER_SET BarharaCounter 12
COUNTER_SET ChalphyCounter 8
COUNTER_SET JungbyCounter 5
COUNTER_SET EddaCounter 3
COUNTER_SET DozelCounter 7
COUNTER_SET FreegeCounter 6
COUNTER_SET VelthomerCounter 8
ENDA

//Let's give the player 30 turns. Or a month.
//Move Sigurd and Celice around the place
//visiting the castles to canvas for the Party.
//Canvas to shore up support and manage the
//various events I throw in your face.
//Can the Jugdral Party weather the crises,
//or get shredded to pieces by them?

TutorialMessage:
MUSC M_LightInheritors
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5Tutorial
TEXTEND
ENDA

WarpOutEffect: //thanks gamma
    CAM1 0xFFFD
    CHECK_COORDS 0xFFFD
    SADD 0xCB
    WARP_OUT
    STAL2 0x14
    REMU 0xFFFD
    ENDWARP
    ENDA
    
WarpInEffect: //based off of gamma's above
    CAM1 0xFFFD
    CHECK_COORDS 0xFFFD
    SADD 0xCB
    WARP_IN
    STAL2 0x14
    REMU 0xFFFD
    ENDWARP
    ENDA
    
ClearVisits:
ENUF BarharaVisited
ENUF ChalphyVisited
ENUF JungbyVisited
ENUF EddaVisited
ENUF DozelVisited
ENUF FreegeVisited
ENUF VelthomerVisited
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5CastlesOpenAgain
TEXTEND
ENDA

BarharaEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 600 s1 sC
SVAL s1 10 //byleth's scheme
BGE 601 s1 sC
SVAL s1 15 //byleth's out
BGE 602 s1 sC
SVAL s1 18 //leaf's warning
BGE 603 s1 sC
SVAL s1 25 //great debate
BGE 604 s1 sC
GOTO 606 //show the final message

BarharaMessage1:
LABEL 600
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaEarlyGame
TEXTEND
GOTO 609

BarharaMessage2:
LABEL 601
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaFirstRefresh
TEXTEND
GOTO 609

BarharaMessage3:
LABEL 602
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaBylethArrives
TEXTEND
GOTO 609

BarharaMessage4:
LABEL 603
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaBylethLeaves
TEXTEND
GOTO 609

BarharaMessage5:
LABEL 604
//just stick with map music
SVAL s1 Celice
CHECK_ACTIVE
BNE 605 s1 sC
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaLeafWarningCelice
TEXTEND
GOTO 609

LABEL 605
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaLeafWarningSigurd
TEXTEND
GOTO 609

BarharaMessage6:
LABEL 606
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitBarharaAfterDebate
TEXTEND
GOTO 609

LABEL 609
COUNTER_INC BarharaCounter
COUNTER_INC BarharaCounter
ENDA

//Text(BarharaPlaceholder)
ENDA

ChalphyEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 610 s1 sC
SVAL s1 10 //byleth's scheme
BGE 611 s1 sC
SVAL s1 15 //byleth's out
BGE 612 s1 sC
SVAL s1 18 //leaf's warning
BGE 613 s1 sC
SVAL s1 25 //great debate
BGE 614 s1 sC
GOTO 616 //show the final message

ChalphyMessage1:
LABEL 610
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitChalphyEarlyGame
TEXTEND
GOTO 609

ChalphyMessage2:
LABEL 611
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitChalphyFirstRefresh
TEXTEND
GOTO 619

ChalphyMessage3:
LABEL 612
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitChalphyBylethArrives
TEXTEND
GOTO 619

ChalphyMessage4:
LABEL 613
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitChalphyBylethLeaves
TEXTEND
GOTO 619

ChalphyMessage5:
LABEL 614
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitChalphyLeafWarning
TEXTEND
GOTO 619

ChalphyMessage6:
LABEL 616
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitChalphyAfterDebate
TEXTEND
GOTO 619

LABEL 619
COUNTER_INC ChalphyCounter
COUNTER_INC ChalphyCounter
ENDA


//Text(ChalphyPlaceholder)
ENDA

JungbyEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 620 s1 sC
SVAL s1 10 //byleth's scheme
BGE 621 s1 sC
SVAL s1 15 //byleth's out
BGE 622 s1 sC
SVAL s1 18 //leaf's warning
BGE 623 s1 sC
SVAL s1 25 //great debate
BGE 624 s1 sC
GOTO 626 //show the final message

JungbyMessage1:
LABEL 620
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyEarlyGame
TEXTEND
GOTO 629

JungbyMessage2:
LABEL 621
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyFirstRefresh
TEXTEND
GOTO 629

JungbyMessage3:
LABEL 622
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyBylethArrives
TEXTEND
GOTO 629

JungbyMessage4:
LABEL 623
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyBylethLeaves
TEXTEND
GOTO 629

JungbyMessage5:
LABEL 624
//just stick with map music
SVAL s1 Celice
CHECK_ACTIVE
BNE 625 s1 sC
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyLeafWarningCelice
TEXTEND
GOTO 629

LABEL 625
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyLeafWarningSigurd
TEXTEND
GOTO 629

JungbyMessage6:
LABEL 626
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitJungbyAfterDebate
TEXTEND
GOTO 629

LABEL 629
COUNTER_INC JungbyCounter
COUNTER_INC JungbyCounter
ENDA

//Text(JungbyPlaceholder)
ENDA

EddaEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 630 s1 sC
SVAL s1 10 //byleth's scheme
BGE 631 s1 sC
SVAL s1 15 //byleth's out
BGE 632 s1 sC
SVAL s1 18 //leaf's warning
BGE 633 s1 sC
SVAL s1 25 //great debate
BGE 634 s1 sC
GOTO 636 //show the final message

EddaMessage1:
LABEL 630
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitEddaEarlyGame
TEXTEND
GOTO 609

EddaMessage2:
LABEL 631
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitEddaFirstRefresh
TEXTEND
GOTO 639

EddaMessage3:
LABEL 632
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitEddaBylethArrives
TEXTEND
GOTO 639

EddaMessage4:
LABEL 633
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitEddaBylethLeaves
TEXTEND
GOTO 639

EddaMessage5:
LABEL 634
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitEddaLeafWarning
TEXTEND
GOTO 639

EddaMessage6:
LABEL 636
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitEddaAfterDebate
TEXTEND
GOTO 639

LABEL 639
COUNTER_INC EddaCounter
COUNTER_INC EddaCounter
ENDA

//Text(EddaPlaceholder)
ENDA

DozelEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 640 s1 sC
SVAL s1 10 //byleth's scheme
BGE 641 s1 sC
SVAL s1 15 //byleth's out
BGE 642 s1 sC
SVAL s1 18 //leaf's warning
BGE 643 s1 sC
SVAL s1 25 //great debate
BGE 644 s1 sC
GOTO 646 //show the final message

DozelMessage1:
LABEL 640
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitDozelEarlyGame
TEXTEND
GOTO 609

DozelMessage2:
LABEL 641
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitDozelFirstRefresh
TEXTEND
GOTO 649

DozelMessage3:
LABEL 642
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitDozelBylethArrives
TEXTEND
GOTO 649

DozelMessage4:
LABEL 643
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitDozelBylethLeaves
TEXTEND
GOTO 649

DozelMessage5:
LABEL 644
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitDozelLeafWarning
TEXTEND
GOTO 649

DozelMessage6:
LABEL 646
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitDozelAfterDebate
TEXTEND
GOTO 649

LABEL 649
COUNTER_INC DozelCounter
COUNTER_INC DozelCounter
ENDA

//Text(DozelPlaceholder)
ENDA

FreegeEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 650 s1 sC
SVAL s1 10 //byleth's scheme
BGE 651 s1 sC
SVAL s1 15 //byleth's out
BGE 652 s1 sC
SVAL s1 18 //leaf's warning
BGE 653 s1 sC
SVAL s1 25 //great debate
BGE 654 s1 sC
GOTO 656 //show the final message

FreegeMessage1:
LABEL 650
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitFreegeEarlyGame
TEXTEND
GOTO 609

FreegeMessage2:
LABEL 651
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitFreegeFirstRefresh
TEXTEND
GOTO 659

FreegeMessage3:
LABEL 652
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitFreegeBylethArrives
TEXTEND
GOTO 659

FreegeMessage4:
LABEL 653
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitFreegeBylethLeaves
TEXTEND
GOTO 659

FreegeMessage5:
LABEL 654
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitFreegeLeafWarning
TEXTEND
GOTO 659

FreegeMessage6:
LABEL 656
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitFreegeAfterDebate
TEXTEND
GOTO 659

LABEL 659
COUNTER_INC FreegeCounter
COUNTER_INC FreegeCounter
ENDA

//Text(FreegePlaceholder)
ENDA

VelthomerEntered:
CHECK_TURNS
SVAL s1 5 //refresh
BGE 660 s1 sC
SVAL s1 10 //byleth's scheme
BGE 661 s1 sC
SVAL s1 15 //byleth's out
BGE 662 s1 sC
SVAL s1 18 //leaf's warning
BGE 663 s1 sC
SVAL s1 25 //great debate
BGE 664 s1 sC
GOTO 666 //show the final message

VelthomerMessage1:
LABEL 660
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitVelthomerEarlyGame
TEXTEND
GOTO 609

VelthomerMessage2:
LABEL 661
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitVelthomerFirstRefresh
TEXTEND
GOTO 669

VelthomerMessage3:
LABEL 662
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitVelthomerBylethArrives
TEXTEND
GOTO 669

VelthomerMessage4:
LABEL 663
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitVelthomerBylethLeaves
TEXTEND
GOTO 669

VelthomerMessage5:
LABEL 664
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitVelthomerLeafWarning
TEXTEND
GOTO 669

VelthomerMessage6:
LABEL 666
//just stick with map music
SetBackground(Castle_Room)
TEXTSHOW VisitVelthomerAfterDebate
TEXTEND
GOTO 669

LABEL 669
COUNTER_INC VelthomerCounter
COUNTER_INC VelthomerCounter
ENDA

//Text(VelthomerPlaceholder)
ENDA

Journalism:
LABEL 10
RANDOMNUMBER 8 //Call a random event. Used to make the chapter a bit less repetitive.
//Nine newspaper articles. Might slash out the big Celice one for forced plot progression.
//SVAL s1 0
//BEQ 100 s1 sC //CeliceNews
//Fix this event as part of the plot?
SVAL s1 1
BEQ 101 s1 sC //SigurdNews
SVAL s1 2
BEQ 102 s1 sC //AlvisNews
SVAL s1 3
BEQ 103 s1 sC //JuliaNews
SVAL s1 4
BEQ 104 s1 sC //FreegeNews
SVAL s1 5
BEQ 105 s1 sC //DozelNews
SVAL s1 6
BEQ 106 s1 sC //EddaNews
SVAL s1 7
BEQ 107 s1 sC //ChalphyNews
SVAL s1 8
BEQ 108 s1 sC //JungbyNews
ENDA

CeliceNews:
LABEL 100
MUSC M_Lopto
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportCelice 
TEXTEND
ENDA

SigurdNews:
LABEL 101
CHECK_EVENTID GuardianPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT GuardianPrinted
COUNTER_DEC ChalphyCounter
MUSC M_Destiny
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportSigurd 
TEXTEND	
ENDA

AlvisNews:
LABEL 102
CHECK_EVENTID TelegraphPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT TelegraphPrinted
COUNTER_DEC VelthomerCounter
MUSC M_Destiny
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportAlvis
TEXTEND
ENDA

JuliaNews:
LABEL 103
CHECK_EVENTID MirrorPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT MirrorPrinted
COUNTER_DEC BarharaCounter
MUSC M_Reidrick
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportJulia
TEXTEND
ENDA

FreegeNews:
LABEL 104
CHECK_EVENTID ExaminerPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT ExaminerPrinted
COUNTER_DEC FreegeCounter
MUSC M_Destiny
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportFreege
TEXTEND
ENDA

DozelNews:
LABEL 105
CHECK_EVENTID IndependentPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT IndependentPrinted
COUNTER_DEC DozelCounter
MUSC M_Destiny
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportDozel
TEXTEND
ENDA

EddaNews:
LABEL 106
CHECK_EVENTID TimesPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT TimesPrinted
COUNTER_DEC EddaCounter
MUSC M_Destiny
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportEdda
TEXTEND
ENDA

ChalphyNews:
LABEL 107
CHECK_EVENTID ExpressPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT ExpressPrinted
COUNTER_DEC ChalphyCounter
MUSC M_Reidrick
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportChalphy
TEXTEND
ENDA

JungbyNews:
LABEL 108
CHECK_EVENTID NOTWPrinted
BNE 10 s0 sC //if true, branch and pick another one
ENUT NOTWPrinted
COUNTER_DEC JungbyCounter
MUSC M_Reidrick
CenterTutorialTextBox
TUTORIALTEXTBOXSTART
TEXTSHOW MAFC5NewsReportJungby
TEXTEND
ENDA

AttackAds:
RANDOMNUMBER 4 //five attack ads
SVAL s1 0
BEQ 200 s1 sC //ad 1
SVAL s1 1
BEQ 201 s1 sC //ad 2
SVAL s1 2
BEQ 202 s1 sC //ad 3
SVAL s1 3
BEQ 203 s1 sC //ad 4
SVAL s1 4
BEQ 204 s1 sC //ad 5
ENDA

EdelgardAttackAd:
LABEL 200
MUSC M_EmperorAlvis
COUNTER_DEC ChalphyCounter //Anti-Chalphies
COUNTER_DEC BarharaCounter
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5EnemyAttackAd1
TEXTEND
ENDA

DimitriAttackAd:
LABEL 201
MUSC M_EmperorAlvis
COUNTER_DEC VelthomerCounter //Anti-Alvis
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5EnemyAttackAd2
TEXTEND
ENDA

ClaudeAttackAd:
LABEL 202
MUSC M_EmperorAlvis
COUNTER_DEC EddaCounter //Anti-Claude
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5EnemyAttackAd3
TEXTEND
ENDA

HildaAttackAd:
LABEL 203
MUSC M_EmperorAlvis
COUNTER_DEC FreegeCounter //Anti-Tinny
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5EnemyAttackAd4
TEXTEND
ENDA

MarianneAttackAd:
LABEL 204
MUSC M_BelovedOne
COUNTER_DEC BarharaCounter //Anti-Celice
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5EnemyAttackAd5
TEXTEND
ENDA

PartyInfighting:
LABEL 30
RANDOMNUMBER 6 //some number of party conflicts
SVAL s1 0
BEQ 300 s1 sC //"culture", i guess?
SVAL s1 1
BEQ 301 s1 sC //finance
SVAL s1 2
BEQ 302 s1 sC //justice
SVAL s1 3
BEQ 303 s1 sC //foreign affairs
SVAL s1 4
BEQ 304 s1 sC //education
SVAL s1 5
BEQ 305 s1 sC //enviroment
SVAL s1 6
BEQ 306 s1 sC //defence
ENDA


ReligionInfighting:
LABEL 300
CHECK_EVENTID FaithClaude
BNE 30 s0 sC
CHECK_EVENTID FaithLex
BNE 30 s0 sC
EVBIT_MODIFY 3 //Start off since it causes issues; B still works
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingFaith
TEXTEND
EVBIT_MODIFY 4 //no skipping
STAL 10 //stall to prevent mashing into a choice
SOUN 0x100 //random sound for testing. Sound an alarm on choices?
TEXTCLOSE
STAL 10
ASMC CallFaithMenu|1
EVBIT_MODIFY 0 //skip on
/*TEXTSHOW MAFC5FaithChoice //old yes/no hack
TEXTEND*
EVBIT_MODIFY 0 //you can skip again
//pinched this from VBA ch24, thanks tera
SVAL r7 True
BEQ 3002 rC r7
  LABEL 3001
  TEXTSHOW MAFC5FaithClaude
  TEXTEND
  REMA
  GOTO 3003
LABEL 3002
  TEXTSHOW MAFC5FaithLex
  TEXTEND
  REMA
LABEL 3003
ENDA*/
BEQ 3001 0xC 0x0 //if C = 0 go to Lex
  LABEL 3002
  ENUT FaithClaude
  COUNTER_INC EddaCounter //you're backing Claude
  COUNTER_INC JungbyCounter //Aideen/Lana are clergy
  COUNTER_INC BarharaCounter //Celice/Julia have Narga's blood
  COUNTER_DEC DozelCounter //you opposed Lex
  COUNTER_DEC FreegeCounter //all that stuff's boring
  COUNTER_DEC VelthomerCounter //he tried to blow it all up
  TEXTSHOW MAFC5FaithClaude
  TEXTEND
  REMA
  GOTO 3003
LABEL 3001
  ENUT FaithLex
  COUNTER_INC DozelCounter
  COUNTER_INC FreegeCounter
  COUNTER_INC VelthomerCounter
  COUNTER_DEC EddaCounter
  COUNTER_DEC JungbyCounter
  COUNTER_DEC BarharaCounter
  TEXTSHOW MAFC5FaithLex
  TEXTEND
  REMA
LABEL 3003
ENDA

TaxInfighting:
LABEL 301
CHECK_EVENTID TaxAideen
BNE 30 s0 sC
CHECK_EVENTID TaxAlvis
BNE 30 s0 sC
EVBIT_MODIFY 3 //Start off since it causes issues; B still works
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingMoney
TEXTEND
EVBIT_MODIFY 4 //no skipping
STAL 10 //stall to prevent mashing into a choice
SOUN 0x100 //random sound for testing. Sound an alarm on choices?
TEXTCLOSE
STAL 10
ASMC CallMoneyMenu|1
EVBIT_MODIFY 0 //skip on
BEQ 3011 0xC 0x0 //if C = 0 go to Lex
  LABEL 3012
  ENUT TaxAlvis
  COUNTER_INC VelthomerCounter //he proposed it
  COUNTER_INC BarharaCounter //central government
  COUNTER_INC FreegeCounter //Azel nags Tiltyu
  COUNTER_DEC JungbyCounter //she opposed it
  COUNTER_DEC ChalphyCounter //long-term planning?
  COUNTER_DEC EddaCounter //church whining
  TEXTSHOW MAFC5MoneyAlvis
  TEXTEND
  REMA
  GOTO 3013
LABEL 3011
  ENUT TaxAideen
  COUNTER_INC JungbyCounter
  COUNTER_INC ChalphyCounter
  COUNTER_INC EddaCounter
  COUNTER_DEC VelthomerCounter
  COUNTER_DEC BarharaCounter
  COUNTER_DEC EddaCounter
  TEXTSHOW MAFC5MoneyAideen
  TEXTEND
  REMA
LABEL 3013
ENDA

CrimeInfighting:
LABEL 302
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingCrime
TEXTEND
ENDA

ForeignAffairsInfighting:
LABEL 303
CHECK_EVENTID FAClaude
BNE 30 s0 sC
CHECK_EVENTID FATiltyu
BNE 30 s0 sC
EVBIT_MODIFY 3 //Start off since it causes issues; B still works
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingForeignAffairs
TEXTEND
EVBIT_MODIFY 4 //no skipping
STAL 10 //stall to prevent mashing into a choice
SOUN 0x100 //random sound for testing. Sound an alarm on choices?
TEXTCLOSE
STAL 10
ASMC CallFAMenu|1
EVBIT_MODIFY 0 //skip on
BEQ 3031 0xC 0x0 //if C = 0 go to Lex
  LABEL 3032
  ENUT FAClaude
  COUNTER_INC EddaCounter //you're backing him
  COUNTER_INC DozelCounter //Lex in Heroes when?
  COUNTER_INC JungbyCounter //Aideen in Heroes when?
  COUNTER_DEC FreegeCounter //Tiltyu's always been around
  COUNTER_DEC ChalphyCounter //Sigurd's early
  COUNTER_DEC BarharaCounter //Celice was almost day 1
  TEXTSHOW MAFC5FAClaude
  TEXTEND
  REMA
  GOTO 3033
LABEL 3031
  ENUT FATiltyu
  COUNTER_INC FreegeCounter
  COUNTER_INC ChalphyCounter
  COUNTER_INC BarharaCounter
  COUNTER_DEC EddaCounter
  COUNTER_DEC DozelCounter
  COUNTER_DEC JungbyCounter
  TEXTSHOW MAFC5FATiltyu
  TEXTEND
  REMA
LABEL 3033
ENDA

EducationInfighting:
LABEL 304
CHECK_EVENTID EduAless
BNE 30 s0 sC
CHECK_EVENTID EduLeaf
BNE 30 s0 sC
EVBIT_MODIFY 3 //Start off since it causes issues; B still works
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingEducation
TEXTEND
EVBIT_MODIFY 4 //no skipping
STAL 10 //stall to prevent mashing into a choice
SOUN 0x100 //random sound for testing. Sound an alarm on choices?
TEXTCLOSE
STAL 10
ASMC CallEducationMenu|1
EVBIT_MODIFY 0 //skip on
BEQ 3041 0xC 0x0 //if C = 0 go to top option
  LABEL 3042
  ENUT EduAless
  COUNTER_INC VelthomerCounter //happy to see Sigurd down a peg
  COUNTER_INC DozelCounter //writing as a bit anti-establishment
  COUNTER_INC FreegeCounter //the bad guys stick together
  COUNTER_DEC BarharaCounter //benefits from the narrative
  COUNTER_DEC ChalphyCounter //would be centre of the narrative
  COUNTER_DEC EddaCounter //churches like narratives
  TEXTSHOW MAFC5EducationAless
  TEXTEND
  REMA
  GOTO 3043
LABEL 3041
  ENUT EduLeaf
  COUNTER_INC BarharaCounter
  COUNTER_INC ChalphyCounter
  COUNTER_INC EddaCounter
  COUNTER_DEC VelthomerCounter
  COUNTER_DEC DozelCounter
  COUNTER_DEC FreegeCounter
  TEXTSHOW MAFC5EducationLeaf
  TEXTEND
  REMA
LABEL 3043
ENDA

EnvironmentInfighting:
LABEL 305
CHECK_EVENTID EnviroJohan
BNE 30 s0 sC
CHECK_EVENTID EnviroTiltyu
BNE 30 s0 sC
EVBIT_MODIFY 3 //Start off since it causes issues; B still works
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingEnvironment
TEXTEND
EVBIT_MODIFY 4 //no skipping
STAL 10 //stall to prevent mashing into a choice
SOUN 0x100 //random sound for testing. Sound an alarm on choices?
TEXTCLOSE
STAL 10
ASMC CallEnvironmentMenu|1
EVBIT_MODIFY 0 //skip on
BEQ 3051 0xC 0x0 //if C = 0 go to top
  LABEL 3052
  ENUT EnviroTiltyu
  COUNTER_INC FreegeCounter //she does not care
  COUNTER_INC EddaCounter //it's a refuge for Loptians
  COUNTER_INC JungbyCounter //church line and whatnot
  COUNTER_DEC BarharaCounter //that's my mother's!
  COUNTER_DEC ChalphyCounter //that's my wife's!
  COUNTER_DEC DozelCounter //I'm opposing you!
  TEXTSHOW MAFC5EnvironmentTiltyu
  TEXTEND
  REMA
  GOTO 3053
LABEL 3051
  ENUT EnviroJohan
  COUNTER_INC DozelCounter
  COUNTER_INC BarharaCounter
  COUNTER_INC ChalphyCounter
  COUNTER_DEC FreegeCounter
  COUNTER_DEC EddaCounter
  COUNTER_DEC JungbyCounter
  TEXTSHOW MAFC5EnvironmentJohan
  TEXTEND
  REMA
LABEL 3053
ENDA

DefenceInfighting:
LABEL 306
CHECK_EVENTID DefenceAlvis
BNE 30 s0 sC
CHECK_EVENTID DefenceLana
BNE 30 s0 sC
EVBIT_MODIFY 3 //Start off since it causes issues; B still works
MUSC M_FE4Convo1
SetBackground(Castle_Hall_4) //check the real defs later
TEXTSHOW MAFC5PartyInfightingDefence
TEXTEND
EVBIT_MODIFY 4 //no skipping
STAL 10 //stall to prevent mashing into a choice
SOUN 0x100 //random sound for testing. Sound an alarm on choices?
TEXTCLOSE
STAL 10
ASMC CallDefenceMenu|1
EVBIT_MODIFY 0 //skip on
BEQ 3031 0xC 0x0 //if C = 0 go to Lex
  LABEL 3062
  ENUT DefenceAlvis
  COUNTER_INC VelthomerCounter //they made me marry my sister!
  COUNTER_INC EddaCounter //never mind our founder's message
  COUNTER_INC FreegeCounter //that stupid Hilda
  COUNTER_DEC JungbyCounter //ever hear of compassion?
  COUNTER_DEC ChalphyCounter //my wife's of them, I don't care
  COUNTER_DEC DozelCounter //gotta round up the numbers
  TEXTSHOW MAFC5DefenceAlvis
  TEXTEND
  REMA
  GOTO 3063
LABEL 3061
  ENUT DefenceLana
  COUNTER_INC JungbyCounter
  COUNTER_INC ChalphyCounter
  COUNTER_INC DozelCounter
  COUNTER_DEC VelthomerCounter
  COUNTER_DEC EddaCounter
  COUNTER_DEC FreegeCounter
  TEXTSHOW MAFC5DefenceLana
  TEXTEND
  REMA
LABEL 3063
ENDA

EnemyAds:
RANDOMNUMBER 4 //four other party ads. might replace these with positive events, but meh
SVAL s1 0
BEQ 400 s1 sC //ad 1
SVAL s1 1
BEQ 401 s1 sC //ad 2
SVAL s1 2
BEQ 402 s1 sC //ad 3
SVAL s1 3
BEQ 403 s1 sC //ad 4
ENDA

FodlanAd:
LABEL 400
//MUSC M_EmperorAlvis
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5OppositionAdvertising1
TEXTEND
ENDA

NohrAd:
LABEL 401
//MUSC M_EmperorAlvis
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5OppositionAdvertising2
TEXTEND
ENDA

ShepardAd:
LABEL 402
//MUSC M_EmperorAlvis
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5OppositionAdvertising3
TEXTEND
ENDA

AskrAd:
LABEL 403
//MUSC M_EmperorAlvis
SetBackground(Castle_Garden) //check the real defs later
TEXTSHOW MAFC5OppositionAdvertising4
TEXTEND
ENDA


FodlanSpies:
MUSC M_ThraciaTheme
LOAD1 0x1 ClaudeGroup
STAL 10
CAM1 Claude3H
STAL 10
MOVE 5 Claude3H [26,9]
MOVE 5 Hilda3H [26,10]
ENUN
STAL 10
FlashCursor(Claude3H,60)
TEXTSTART
TEXTSHOW MAFC5Turn1FodlanSpies
TEXTEND
ENDA

PropagandaPlotting:
MUSC M_ThraciaTheme
LOAD1 0x1 BylethEntry
CAM1 Byleth
MOVE 5 Byleth [24,8]
ENUN
MOVE 5 Claude3H [24,9]
ENUN
STAL 10
FlashCursor(Byleth,60)
SetBackground(Woodland)
TEXTSHOW MAFC5PropagandaPlotting
TEXTEND
ENDA

PropagandaPlotting2:
MUSC M_ThraciaTheme
CAM1 Byleth
SetBackground(Woodland_Evening)
TEXTSHOW MAFC5PropagandaPlotting2
TEXTEND
CALL $9EE2C4 //EndConvo
STAL 10
MOVE 5 Byleth [21,7]
MOVE 5 Claude3H [26,9]
ENUN
DISA Byleth
STAL 15
MOVE 5 Claude3H [19,17]
STAL 5
MOVE 5 Hilda3H [20,17]
ENUN
CALL ClearVisits
CALL EnemyAds
ENDA

BylethFishingTrip:
MUSC M_EmperorAlvis
LOAD1 0x1 BylethVerdane
MOVE -1 Byleth [16,26] //camera gets stuck on Barhara otherwise
STAL 10
CAM1 Byleth
STAL 10
SetBackground(Plain_Fog)
TEXTSHOW MAFC5BylethDeparts
TEXTEND
CALL $9EE2C4 //EndConvo
EVBIT_T 9 //CMON; camera follows
STAL 10
MOVE 5 Byleth [4,28]
MOVE 5 Dorothea [4,29]
ENUN
MOVE 5 Byleth [0,22]
MOVE 5 Dorothea [0,22]
STAL 10
MOVE 10 Dew [3,24]
ENUN
DISA Byleth
DISA Dorothea

CAM1 [14,22] //Chalphy. Move Sigurd here first?
EVBIT_MODIFY 3 //Start off
STAL 10
SetBackground(Castle_Outside)
TEXTSHOW MAFC5BylethDeparts2
TEXTEND
EVBIT_MODIFY 4 //No skipping
STAL 10
SOUN 0x100 //random sound
TEXTSHOW MAFC5BylethDepartsSnoop //yes/no	
TEXTEND
EVBIT_MODIFY 0 //skip back on
SVAL r1 1 
BEQ 500 rC r1 //branch if yes
  LABEL 501
  TEXTSHOW 0x123
  GOTO 502
LABEL 500
ENUT BylethInvestigated
TEXTSHOW MAFC5BylethDepartsSnoopYes
TEXTEND
TEXTSHOW MAFC5BylethDepartsSnoopYes2
TEXTEND
LABEL 502
CALL ClearVisits
ENDA	

OneWeekWarning:
MUSC M_FE4Convo1
CAM1 [21,7] //Barhara. Move Celice in?
SetBackground(Castle_Room)
TEXTSHOW MAFC5WeekToTheDebate
TEXTEND
CALL ClearVisits
ENDA

IncestFaked:
MUSC M_Reidrick
SetBackground(Inn)
TEXTSHOW MAFC5IncestConspiracyRecorded
TEXTEND
ENDA

GreatDebate:
SetBackground(Shrine_2)
MUSC M_ThraciaTheme
TEXTSHOW MAFC5GreatDebateIntro
TEXTEND
MUSC M_Lopto
TEXTSHOW MAFC5GreatDebateRelations
TEXTEND
MUSC M_VersusAlvis
TEXTSHOW MAFC5GreatDebateGroomingCounter
TEXTEND
CALL ClearVisits
ENDA

// Manual Movement

// Scripted Fights

// Units
OpeningCutsceneUnits:
UNIT Sigurd LordKnight 0x00 Level(30, Ally, 0) [21,8] 0x0 0x00 0x0 0x00 [Tyrfing] NoAI 
UNIT Celice LordKnight 0x00 Level(30, Ally, 0) [21,7] 0x0 0x00 0x0 0x00 [SilverSword] NoAI 
UNIT

ClaudeGroup:
UNIT Claude3H WyvernLord 0x00 Level(30, Enemy, 0) [29,9] 0x0 0x00 0x0 0x00 [SilverBow /*Failnaught*/] NeverMoveAI //edge of the map
UNIT Hilda3H WyvernLord_F 0x00 Level(30, Enemy, 0) [29,10] 0x0 0x00 0x0 0x00 [SilverAxe /*Freikugel*/] NeverMoveAI //edge of the map
UNIT

BylethEntry:
UNIT Byleth Swordmaster 0x00 Level(30, Enemy, 0) [29,4] 0x0 0x00 0x0 0x00 [SilverSword /*Creator Sword*/] NeverMoveAI
UNIT

BylethVerdane:
UNIT Byleth Swordmaster 0x00 Level(30, Enemy, 0) [16,26] 0x0 0x00 0x0 0x00 [SilverSword /*Creator Sword*/] NeverMoveAI
UNIT Dorothea Dancer 0x00 Level(30, Enemy, 0) [17,26] 0x0 0x00 0x0 0x00 [Meteor] NeverMoveAI
UNIT Dew Rogue 0x00 Level(30, NPC, 0) [2,24] 0x0 0x00 0x0 0x00 [WindSword] NoAI
UNIT

// Shop Data

MESSAGE Events end at offset currentOffset